<div class="dashboard-container">
    <!-- Sidebar -->
    <nav class="sidebar">
        <div class="logo-section">
        <img src="../../../assets/pasaporte.png" alt="Logo" class="logo" />
        <span class="system-name">Visa.ES</span>
        </div>
        <hr class="divider" />
        <ul class="menu">
        <li routerLinkActive="active">
            <a routerLink="/dashboard/solicitante/mis-solicitudes">Mis Solicitudes</a>
        </li>
        <li routerLinkActive="active">
            <a routerLink="/dashboard/solicitante/mis-citas">Mis Citas</a>
        </li>
        </ul>
        <div class="user-section">
        <span>{{ username }}</span>
        <button (click)="logout()">Salir</button>
        </div>
    </nav>

    <!-- Contenido principal -->
    <main class="main-content">
        <div class="header">
        <h1>Agendar Cita</h1>
        </div>

        <div class="citas-form">
        

        <div class="section-header">
            <h2 class="section-title">Seleccione un horario</h2>
            <!-- Datepicker -->
            <mat-form-field appearance="fill">
                <mat-label>Seleccionar semana</mat-label>
                <input matInput [matDatepicker]="picker" (dateChange)="onDateChange($event)">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
        </div>

        <!-- Leyenda -->
        <div class="legend">
        <span class="legend-item ocupado">Ocupado</span>
        <span class="legend-item disponible">Disponible</span>
        <span class="legend-item seleccionado">Seleccionado</span>
        </div>


        <div class="calendar-table">
            <!-- Encabezados de dÃ­as -->
            <div class="calendar-header">
            <div class="hour-cell"></div>
            <div class="day-cell" *ngFor="let dia of semana">
                {{ dia.nombre | titlecase }} <br> {{ dia.fecha | date:'dd/MM' }}
            </div>
            </div>

            <!-- Filas de horarios -->
            <div class="calendar-row" *ngFor="let hora of horas">
            <div class="hour-cell">{{ hora }}</div>
            <div
                class="slot"
                *ngFor="let dia of semana"
                [ngClass]="{
                'ocupado': getEstadoSlot(dia, hora) === 'Ocupado',
                'disponible': getEstadoSlot(dia, hora) === 'Disponible',
                'seleccionado': getEstadoSlot(dia, hora) === 'Seleccionado'
                }"
                (click)="seleccionarSlot(dia, hora)">
            </div>
            </div>
        </div>



        <div class="form-actions">
            <button
            class="submit-button"
            (click)="confirmarCita()"
            [disabled]="!slotSeleccionado">
            Confirmar Cita
            </button>
            <button class="cancel-button">Cancelar</button>
        </div>
        </div>
    </main>
</div>
